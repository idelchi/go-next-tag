services:
  build:
    build:
      args:
        - GO_NEXT_TAG_VERSION=local
    pull_policy: if_not_present
    image: common-docker-local.bin.swisscom.com/go-next-tag:dev
    container_name: go-next-tag
    hostname: go-next-tag
    user: user
    volumes:
      - .:/home/user/ws
    extra_hosts:
      - host:host-gateway
    working_dir: /home/user/ws
    networks:
      - go-next-tag-network

  kit:
    pull_policy: if_not_present
    image: common-docker-local.bin.swisscom.com/${IMAGE}:dev
    container_name: kit
    hostname: kit
    volumes:
      - $PWD:/home/ci/ws
    extra_hosts:
      - host.docker.internal:host-gateway
    working_dir: /home/ci/ws

# The default network used to connect the containers
# Is not needed when the services are defined inside one project,
# but can be used to connect external containers to the network
networks:
  go-next-tag-network:
    name: go-next-tag
    driver: bridge
